#pragma once

//----------------------------------------------------------------------------------------------------------------------
//  Check board type
//----------------------------------------------------------------------------------------------------------------------

#ifndef ARDUINO_MH_ET_LIVE_ESP32MINIKIT
  #error "Select 'MH ET LIVE ESP32MiniKit' board"
#endif

//----------------------------------------------------------------------------------------------------------------------

#include <Arduino.h>

//----------------------------------------------------------------------------------------------------------------------
//   CONSTANTS
//----------------------------------------------------------------------------------------------------------------------

static const uint32_t FILE_NAME_SIZE = 24 ;
static const uint32_t RECORD_SIZE = 60 ;

//----------------------------------------------------------------------------------------------------------------------
//   LOG TYPE DEFINITIONS
//----------------------------------------------------------------------------------------------------------------------

typedef struct {
  int mConsigne ;
  int mTemperature ;
  bool mOvenIsOn ;
} Record ;

typedef struct {
  uint32_t mLogStartTime ;
  uint32_t mLogImageSize ;
  Record mLogImage [RECORD_SIZE] ;
  char mFileName [FILE_NAME_SIZE] ;
} LogData ;

//----------------------------------------------------------------------------------------------------------------------
//   ENTER LOG DATA (done by OvenControl thread)
//----------------------------------------------------------------------------------------------------------------------

void enterLogData (const LogData & inData) ;

//----------------------------------------------------------------------------------------------------------------------
//   WRITE LOG FILE (done in main thread)
//----------------------------------------------------------------------------------------------------------------------

void writeLogFile (void) ;

//----------------------------------------------------------------------------------------------------------------------
