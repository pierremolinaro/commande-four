#pragma once

#include <Arduino.h>

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//   CONSTANTS
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

static const uint32_t FILE_NAME_SIZE = 24 ;
static const uint32_t RECORD_SIZE = 60 ;

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//   LOG TYPE DEFINITIONS
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

typedef struct {
  int mConsigne : 15 ;
  unsigned mOvenIsOn :  1 ;
  int mTemperature : 15 ;
} Record ;

typedef struct {
  uint32_t mLogStartTime ;
  uint32_t mLogImageSize ;
  Record mLogImage [RECORD_SIZE] ;
  char mFileName [FILE_NAME_SIZE] ;
} LogData ;

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//   ENTER LOG DATA (done by OvenControl thread)
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

void enterLogData (const LogData & inData) ;

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//   WRITE LOG FILE (done in main thread)
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

void writeLogFile (void) ;

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
